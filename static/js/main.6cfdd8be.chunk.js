(this.webpackJsonpdishy=this.webpackJsonpdishy||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(8),i=n(20),c=n.n(i),o=(n(52),n(7)),u=(n(53),n(54),n.p+"static/media/dishy-logo-1.17f392e8.png"),d=n(4),l=n(1),j=Object(a.createContext)();function b(e){var t=e.children,n=Object(a.useState)({username:"",accessToken:"",id:0}),r=Object(d.a)(n,2),s=r[0],i=r[1];return Object(l.jsx)(j.Provider,{value:{user:s,setUser:i},children:t})}var h,m,p,f,g,O,x=n(14),v=n(15),w=function(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e,t])},y=v.a.button(h||(h=Object(x.a)(["\n  padding: 0;\n  margin: 0;\n  width: 55px;\n  height: 50px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-evenly;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    margin: 0;\n    padding: 0;\n    width: 45px;\n    height: 8px;\n    background: white;\n    border-radius: 5px;\n    transition: all 0.3s linear;\n    transform-origin: 2.25px;\n\n    :first-child {\n      background: ",";\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      background: ",";\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      background: ",";\n      transform: ",";\n    }\n  }\n"])),(function(e){return e.open?"linear-gradient(130deg, #fcb0ff 0%, #fcb0ff 20%, #FA50FF 100%)":"linear-gradient(130deg, #61FFE3 0%, #61FFE3 20%, #00A2F4 100%)"}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"linear-gradient(130deg, #fcb0ff 0%, #fcb0ff 20%, #FA50FF 100%)":"linear-gradient(130deg, #61FFE3 0%, #61FFE3 20%, #00A2F4 100%)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"linear-gradient(130deg, #fcb0ff 0%, #fcb0ff 20%, #FA50FF 100%)":"linear-gradient(130deg, #61FFE3 0%, #61FFE3 20%, #00A2F4 100%)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),N=function(e){var t=e.open,n=e.setOpen;return Object(l.jsxs)(y,{open:t,onClick:function(){return n(!t)},children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})},S=n.p+"static/media/menu-image-home.84ee7eaf.png",k=n.p+"static/media/menu-image-ratedish.d89e22a2.png",F=n.p+"static/media/menu-image-finddish.62d35d65.png",R=n.p+"static/media/menu-image-login-peach.e3ddea9c.png",C=n.p+"static/media/menu-image-logout.e27f0bcb.png",P=n.p+"static/media/menu-image-signup.1e4611ea.png",L=v.a.nav(m||(m=Object(x.a)(["\n  position: absolute;\n  z-index: 2;\n  top: 80px;\n  right: 0;\n  height: calc(100vh - 80px - 40px);\n  width: 260px;\n  padding: 20px 0;\n  background: linear-gradient(\n    rgba(50, 50, 50, 1) 0%,\n    rgba(40, 30, 50, 1) 93%,\n    #f63ed4 96%,\n    #33f2ff 98%\n  );\n  text-align: center;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  transform: ",";\n  transition: transform 0.3s ease-in-out;\n\n  @media (max-width: ",") {\n    width: 100%;\n  }\n"])),(function(e){return e.open?"translateX(0)":"translateX(100%)"}),(function(e){return e.theme.mobile})),D=Object(v.a)(s.b)(p||(p=Object(x.a)(['\n  width: 100%;\n  height: 70px;\n  padding: 0 0px 0 0;\n  font-family: "Contrail One", Helvetica, sans-serif;\n  font-size: 1.8em;\n  color: white;\n  text-decoration: none;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-end;\n  align-items: center;\n\n  @media (max-width: ',") {\n    font-size: 1.5rem;\n    text-align: center;\n  }\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.mobile}),(function(e){return e.theme.primaryHover})),M=v.a.button(f||(f=Object(x.a)(['\n  width: 100%;\n  height: 70px;\n  background: none;\n  border: none;\n  padding: 0 0px 0 0;\n  font-family: "Contrail One", Helvetica, sans-serif;\n  font-size: 1.8em;\n  color: white;\n  text-decoration: none;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-end;\n  align-items: center;\n\n  @media (max-width: ',") {\n    font-size: 1.5rem;\n    text-align: center;\n  }\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.mobile}),(function(e){return e.theme.primaryHover})),H=v.a.img(g||(g=Object(x.a)(["\n  height: 60px;\n"]))),I=function(e){var t=e.open,n=e.isLoggedIn,a=e.handleLogout;return Object(l.jsx)(L,{open:t,children:n?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(D,{to:"/",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-home",src:S,alt:"Home"})}),Object(l.jsx)(D,{to:"/find",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-finddish",src:F,alt:"Find Dish"})}),Object(l.jsx)(D,{to:"/review",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-ratedish",src:k,alt:"Rate Dish"})}),Object(l.jsx)(M,{type:"button",onClick:a,children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-logout",src:C,alt:"Log Out"})})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(D,{to:"/signin",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-login-pink",src:R,alt:"Login"})}),Object(l.jsx)(D,{to:"/signup",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-signup",src:P,alt:"Sign Up"})}),Object(l.jsx)(D,{to:"/",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-home",src:S,alt:"Home"})}),Object(l.jsx)(D,{to:"/find",children:Object(l.jsx)(H,{className:"Menu-image",id:"Menu-image-finddish",src:F,alt:"Find Dish"})})]})})},B=v.a.div(O||(O=Object(x.a)(["\n  height: 50px;\n  width: 56px;\n"]))),T=function(e){var t=e.isLoggedIn,n=e.handleLogout,r=Object(a.useState)(!1),s=Object(d.a)(r,2),i=s[0],c=s[1],o=Object(a.useRef)();return w(o,(function(){return c(!1)})),Object(l.jsxs)(B,{ref:o,children:[Object(l.jsx)(N,{open:i,setOpen:c}),Object(l.jsx)(I,{open:i,isLoggedIn:t,handleLogout:n})]})},A=function(){var e=Object(a.useContext)(j),t=e.user,n=e.setUser;Object(a.useEffect)((function(){localStorage.loggedInUser&&n(JSON.parse(localStorage.loggedInUser))}),[]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"Navbar",id:"Navbar",children:[Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("img",{className:"Navbar-image",id:"Navbar-home-image",src:u,alt:"Home"})}),Object(l.jsxs)("div",{id:"Navbar-right-links-container",children:[t.username?Object(l.jsxs)("div",{className:"Navbar-text-container",id:"Navbar-username-container",children:[Object(l.jsx)("p",{children:"Hi"}),Object(l.jsxs)("p",{children:[t.username,"!"]})]}):null,Object(l.jsx)(T,{isLoggedIn:t.username,handleLogout:function(e){e.preventDefault(),n({username:"",accessToken:"",id:""}),localStorage.clear()}})]})]})})},E=(n(61),function(){var e=Object(a.useContext)(j).user;return Object(l.jsxs)("div",{className:"HomePage",children:[Object(l.jsx)("h1",{className:"HomePage-header",id:"HomePage-header",children:Object(l.jsx)("img",{src:u,alt:"DISHY"})}),Object(l.jsx)("p",{className:"HomePage-text",children:"Dishy finds all the top-rated dishes in your location."}),Object(l.jsx)("p",{className:"HomePage-text",children:"Find the very best food near you!"}),Object(l.jsxs)("div",{className:"HomePage-buttons-container",children:[Object(l.jsx)(s.b,{to:"/find",className:"HomePage-link-button",id:"HomePage-link-button-find",children:"Find a Dish"}),e.username&&Object(l.jsx)(s.b,{to:"/review",className:"HomePage-link-button",id:"HomePage-link-button-review",type:"button",children:"Rate a Dish"}),!e.username&&Object(l.jsx)(s.b,{to:"/signin",className:"HomePage-link-button",id:"HomePage-link-button-login",type:"button",children:"Log In"})]}),!e.username&&Object(l.jsx)(s.b,{to:"/signup",className:"HomePage-link-button",id:"HomePage-link-button-signup",type:"button",children:"Create an account"})]})}),U=n(18),z=n(3),q=n.n(z),J=n(5),G=n(6),X=(n(63),n(33),n(64),n(19)),_=n(13),Y=n.n(_),W="https://dishymcr.herokuapp.com/",K=function(){var e=Object(G.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.post("".concat(W,"rating/search"),{query:t}).then((function(e){return{status:e.status,ratings:e.data}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.get("".concat(W,"dish/")).then((function(e){var t=Object(X.a)(e.data);return t.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),{status:e.status,dishes:t}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(G.a)(q.a.mark((function e(t,n){var a,r,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.coordinates,r=n.name,s=n.location,e.abrupt("return",Y.a.post("".concat(W,"restaurant"),{yelp_id:t.restaurant,longitude:a.longitude,latitude:a.latitude,name:r,address1:s.address1,address2:s.address2,city:s.city,zip_code:s.zip_code}).then((function(e){return{status:e.status,restaurant:e.data}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(G.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.post("".concat(W,"dish"),{name:t.dish}).then((function(e){return{status:e.status,dish:e.data}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(G.a)(q.a.mark((function e(t,n,a,r,s){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.a.post("".concat(W,"rating"),{rating:t.rating,comment:"placeholder comment",RestaurantId:n,DishId:a,UserId:r},{headers:{"x-access-token":s}}).then((function(e){return{status:e.status,rating:e.data}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}(),ee=function(e){return Y.a.get("".concat(W,"restaurants/search/").concat(e)).then((function(e){return{status:e.status,restaurants:e.data.businesses}}))},te=function(e){var t=e.renderComponent,n=e.handleGetRestaurantsByGeolocation,r=e.setRenderSearchForRestaurant,s=e.setRenderReviewForm,i=e.setReview,c=e.initialReviewState,o=Object(a.useState)({yesButton:!1,noButton:!1}),u=Object(d.a)(o,2),j=u[0],b=u[1],h=function(){var e=Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(c);case 2:return e.next=4,n();case 4:return e.next=6,r(!1);case 6:return e.next=8,s(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(G.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(c);case 2:return e.next=4,r(!0);case 4:return e.next=6,s(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(l.jsxs)("div",{className:"form-field",id:"StillAtRestaurantSelector",children:[Object(l.jsx)("p",{className:"ReviewDishPage-text",children:"Are you at the restaurant?"}),Object(l.jsxs)("div",{id:"stillAtRestaurantButtonsContainer",children:[Object(l.jsx)("button",{type:"submit",className:"pink-button stillAtRestaurantButton ".concat(j.yesButton&&"disabled-pink-button"),onClick:function(){return!j.yesButton&&(b({yesButton:!0,noButton:!1}),void h())},children:"Yes"}),Object(l.jsx)("button",{type:"submit",className:"pink-button stillAtRestaurantButton ".concat(j.noButton&&"disabled-pink-button"),onClick:function(){return!j.noButton&&(b({yeButton:!1,noButton:!0}),void m())},children:"No"})]})]}):null},ne=function(e){var t=e.renderComponent,n=e.setRestaurantsList,r=e.review,s=e.setReview,i=e.setRenderReviewForm,c=Object(a.useState)(""),o=Object(d.a)(c,2),u=o[0],j=o[1],b=function(){var e=Object(G.a)(q.a.mark((function e(t){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ee(u);case 3:return a=e.sent,e.next=6,n(a.restaurants);case 6:return e.next=8,s(Object(J.a)(Object(J.a)({},r),{},{restaurant:a.restaurants[0].id}));case 8:i(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(l.jsxs)("div",{className:"form-field",children:[Object(l.jsxs)("label",{htmlFor:"set-location",children:["Enter the restaurant's address:",Object(l.jsx)("input",{id:"set-location",className:"form-input",name:"set-location",placeholder:"7 Main Street, Manchester",onChange:function(e){j(e.target.value)},value:u})]}),Object(l.jsx)("button",{id:"find-restaurant-submit-button",className:"pink-button",type:"submit",onClick:b,children:"Search"})]}):null},ae=n(47),re=(n(101),function(e){var t=e.renderComponent,n=e.restaurantsList,r=e.dishesList,s=e.setDishesList,i=e.handleFieldChange,c=e.currentRating,o=e.handleSubmitReviewForm,u=e.review,j=e.setReview,b=r.map((function(e){return{label:e,value:e}})),h=Object(a.useState)(!1),m=Object(d.a)(h,2),p=m[0],f=m[1];return t?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsxs)("label",{htmlFor:"restaurant",children:["Choose your restaurant:",Object(l.jsxs)("select",{id:"restaurant",className:"form-input",name:"restaurant",onChange:i,required:!0,children:[n.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)})),";"]})]})}),Object(l.jsxs)("form",{onSubmit:function(e){f(!0),setTimeout((function(){f(!1)}),2e3),o(e)},children:[Object(l.jsxs)("div",{className:"form-field",children:[Object(l.jsx)("p",{className:"select-food-header",children:"What did you eat?"}),Object(l.jsx)("p",{className:"select-food-text",children:"If it isn't in the list you can type it in!"}),Object(l.jsx)(ae.a,{options:b,name:"dish",onChange:function(e,t){"create-option"===t.action&&(s([].concat(Object(X.a)(r),[e.value])),j(Object(J.a)(Object(J.a)({},u),{},{dish:e.value}))),"select-option"===t.action&&j(Object(J.a)(Object(J.a)({},u),{},{dish:e.value}))},id:"creatable",required:!0,components:{IndicatorSeparator:function(){return null}},styles:{control:function(e,t){return Object(J.a)(Object(J.a)({},e),{},{boxShadow:"none",border:t.isFocused&&"none"})},menu:function(e){return Object(J.a)(Object(J.a)({},e),{},{border:"none",boxShadow:"none"})},option:function(e,t){return Object(J.a)(Object(J.a)({},e),{},{backgroundColor:t.isFocused&&"lightgray",color:t.isFocused&&"red"})}}})]}),Object(l.jsxs)("div",{className:"form-field",id:"rating-form",children:[Object(l.jsxs)("label",{htmlFor:"rating",children:[Object(l.jsx)("p",{children:"Rate it!"}),Object(l.jsx)("input",{type:"range",id:"rating-slider",name:"rating",min:"1",max:"10",step:"1",onChange:i})]}),Object(l.jsxs)("div",{id:"rating-value-display",children:[Object(l.jsx)("p",{children:"Your rating:"}),Object(l.jsx)("p",{id:"rating-value-number",children:c})]})]}),Object(l.jsx)("div",{id:"review-submit-button",className:"form-field",children:Object(l.jsx)("button",{type:"submit",className:p?"pink-button button-flash":"pink-button",disabled:p,children:"Rate it!"})})]})]}):null}),se=(n(102),function(e){var t=e.messageType,n=e.messageText;return Object(l.jsx)("p",{className:"message ".concat(t),children:n})});se.defaultProps={messageType:""};var ie=se,ce=n.p+"static/media/review-image-1.47e0b1ab.png",oe=function(){var e={renderStillAtRestaurant:!1,renderSearchForRestaurant:!1,renderReviewForm:!1,submitStatus:"",geolocation:{latitude:"",longitude:""},locationSearch:"",restaurantsList:[],review:{restaurant:"",dish:"",rating:"10"}},t=Object(o.e)(),n=Object(a.useContext)(j).user;n.username||t.push("/");var r=Object(a.useState)(e.geolocation),s=Object(d.a)(r,2),i=s[0],c=s[1],u=Object(a.useState)(e.restaurantsList),b=Object(d.a)(u,2),h=b[0],m=b[1],p=Object(a.useState)([]),f=Object(d.a)(p,2),g=f[0],O=f[1],x=Object(a.useState)(e.review),v=Object(d.a)(x,2),w=v[0],y=v[1],N=Object(a.useState)(e.renderStillAtRestaurant),S=Object(d.a)(N,2),k=S[0],F=S[1],R=Object(a.useState)(e.renderSearchForRestaurant),C=Object(d.a)(R,2),P=C[0],L=C[1],D=Object(a.useState)(e.renderReviewForm),M=Object(d.a)(D,2),H=M[0],I=M[1],B=Object(a.useState)(e.submitStatus),T=Object(d.a)(B,2),A=T[0],E=T[1],z=function(){var e=Object(G.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:return t=e.sent,O(t.dishes.map((function(e){return e.name}))),e.next=6,y(Object(J.a)(Object(J.a)({},w),{},{dish:g[0]}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(G.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=i.latitude,a=i.longitude,Y.a.get("".concat(W,"restaurants/geolocation/").concat(n,"/").concat(a)).then((function(e){return{status:e.status,restaurants:e.data.businesses}}));case 2:return t=e.sent,e.next=5,m(t.restaurants);case 5:return e.next=7,y(Object(J.a)(Object(J.a)({},w),{},{restaurant:t.restaurants[0].id}));case 7:case"end":return e.stop()}var n,a}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(G.a)(q.a.mark((function e(t){var a,r,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(""),a=h.find((function(e){return e.id===w.restaurant})),e.next=5,Z(w);case 5:return r=e.sent,e.next=8,V(w,a);case 8:return s=e.sent,e.next=11,$(w,s.restaurant[0].id,r.dish[0].id,n.id,n.accessToken);case 11:e.sent.status=E("success");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){"geolocation"in navigator?F(!0):L(!0),function(){var e=function(){var e=Object(G.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({latitude:t.coords.latitude.toString(),longitude:t.coords.longitude.toString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window.navigator.geolocation.getCurrentPosition(e)}(),z()}),[]),Object(l.jsxs)("div",{className:"ReviewDishPage",children:[Object(l.jsx)("h2",{className:"ReviewPage-header",id:"ReviewPage-header",children:Object(l.jsx)("img",{src:ce,alt:"Rate a Dish"})}),Object(l.jsxs)("div",{className:"form-container",children:[Object(l.jsx)(te,{renderComponent:k,handleGetRestaurantsByGeolocation:X,setRenderSearchForRestaurant:L,setRenderReviewForm:I,setReview:y,initialReviewState:e.review}),Object(l.jsx)(ne,{renderComponent:P,setRestaurantsList:m,review:w,setReview:y,setRenderReviewForm:I}),Object(l.jsx)(re,{renderComponent:H,restaurantsList:h,dishesList:g,currentRating:w.rating,handleFieldChange:function(e){y(Object(J.a)(Object(J.a)({},w),{},Object(U.a)({},e.target.name,e.target.value)))},handleSubmitReviewForm:_,review:w,setReview:y,setDishesList:O})]}),Object(l.jsxs)("div",{className:"message-container",children:["success"===A?Object(l.jsx)(ie,{messageType:"banner banner-flash",messageText:"Rating submitted!"}):null,"fail"===A?Object(l.jsx)(ie,{messageType:"banner error",messageText:"Oops, something went wrong! Please try again later."}):null]})]})},ue=(n(103),n(104),function(e){var t=e.availableDishes,n=e.handleFilterByDish;return Object(l.jsx)("div",{className:"form-field",children:Object(l.jsxs)("label",{htmlFor:"set-dish",children:["Choose a dish:",Object(l.jsxs)("select",{id:"set-dish",className:"form-input",name:"set-dish",onChange:n,children:[Object(l.jsx)("option",{selected:!0,disabled:!0,hidden:!0,style:{display:"none"},value:"","aria-label":"Please select one of the following options"}),t.map((function(e){return Object(l.jsx)("option",{value:e.name,children:e.name},e.id)})),";"]})]})})});n(105);function de(e){return e*(Math.PI/180)}var le=function(e,t,n,a){var r=de(n-e),s=de(a-t),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(de(e))*Math.cos(de(n))*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))};n(106);var je=function(e){var t=e.rating,n=Object(a.useState)(!1),r=Object(d.a)(n,2),s=r[0],i=r[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("button",{type:"submit",className:"RatingCard",onClick:function(e){e.preventDefault(),"deleteRating"!==e.target.className&&i(!s)},children:[Object(l.jsxs)("div",{className:"RatingCard-top-container",children:[Object(l.jsxs)("div",{className:"RatingCard-left-container",children:[Object(l.jsx)("p",{children:t.name}),Object(l.jsxs)("p",{children:["Distance: ",t.distance,"m"]}),Object(l.jsx)("div",{})]}),Object(l.jsx)("div",{id:"RatingCard-right-container",children:Object(l.jsx)("div",{className:"rating-circle",children:Object(l.jsx)("p",{children:t.averageScore})})})]}),s&&Object(l.jsxs)("div",{className:"RatingCard-address",children:[Object(l.jsx)("p",{children:"Address:"}),Object(l.jsx)("p",{children:t.address.address1}),Object(l.jsx)("p",{children:t.address.address2}),Object(l.jsx)("p",{children:t.address.city}),Object(l.jsx)("p",{children:t.address.zip_code})]})]})})};function be(e){var t=e.filteredRatings,n=e.coordinates,r=Object(a.useState)([]),s=Object(d.a)(r,2),i=s[0],c=s[1];Object(a.useEffect)((function(){var e=[];t.forEach((function(t){var a=Object(J.a)(Object(J.a)({},t),{},{distance:Math.round(le(n.latitude,n.longitude,t.coordinates.latitude,t.coordinates.longitude)),averageScore:t.scores.reduce((function(e,t){return e+t}),0)/t.scores.length});e.push(a)})),c(e)}),[t]);return t[0]?Object(l.jsxs)("div",{id:"DishRatings",children:[Object(l.jsxs)("div",{id:"sort-buttons-container",children:[Object(l.jsx)("button",{className:"sort-button pink-button",type:"submit",onClick:function(e){e.preventDefault();var t=Object(X.a)(i);t.sort((function(e,t){return e.averageScore>t.averageScore?-1:t.averageScore>e.averageScore?1:0})),c(t)},children:"Sort by Rating"}),Object(l.jsx)("button",{className:"sort-button pink-button",type:"submit",onClick:function(e){e.preventDefault();var t=Object(X.a)(i);t.sort((function(e,t){return e.distance>t.distance?1:t.distance>e.distance?-1:0})),c(t)},children:"Sort by Distance"})]}),Object(l.jsx)("div",{id:"rating-cards",children:i.map((function(e){return Object(l.jsx)(je,{rating:e},e.name)}))})]}):null}be.defaultProps={coordinates:{longitude:0,latitude:0},filteredRatings:[]};var he=be,me=n.p+"static/media/search-image-1.3e918d1e.png",pe=function(){var e=[],t={longitude:0,latitude:0},n=[],r=Object(a.useState)(e),s=Object(d.a)(r,2),i=s[0],c=s[1],o=Object(a.useState)(t),u=Object(d.a)(o,2),j=u[0],b=u[1],h=Object(a.useState)(n),m=Object(d.a)(h,2),p=m[0],f=m[1];Object(a.useEffect)((function(){function e(){return(e=Object(G.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:t=e.sent,c(t.dishes);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){b({longitude:e.coords.longitude,latitude:e.coords.latitude})}))}),[]);var g=function(){var e=Object(G.a)(q.a.mark((function e(t){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,K(t.target.value);case 3:n=e.sent,f(n.ratings);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"FindDishPage",children:[Object(l.jsx)("h2",{className:"FindPage-header",id:"FindPage-header",children:Object(l.jsx)("img",{src:me,alt:"Find a Dish"})}),Object(l.jsxs)("div",{className:"form-container",children:[Object(l.jsx)(ue,{availableDishes:i,handleFilterByDish:g}),Object(l.jsx)("div",{children:Object(l.jsx)(he,{filteredRatings:p,coordinates:j})})]})]})},fe="https://dishymcr.herokuapp.com/",ge=function(){var e=Object(G.a)(q.a.mark((function e(t){var n,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,e.abrupt("return",Y.a.post("".concat(fe,"auth/signin"),{username:n,password:a}).then((function(e){return{status:e.status,data:e.data}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(G.a)(q.a.mark((function e(t){var n,a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,r=t.email,e.abrupt("return",Y.a.post("".concat(fe,"auth/signup"),{username:n,password:a,email:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=n.p+"static/media/login-image-2.f1b7d5f7.png";n(107);var ve=function(){var e=Object(a.useState)({username:"",password:""}),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(a.useContext)(j).setUser,c=Object(o.e)(),u=function(){var e=Object(G.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ge(n).then((function(e){if(e.data.accessToken){var t={username:e.data.username,accessToken:e.data.accessToken,id:e.data.id};i(t),localStorage.setItem("loggedInUser",JSON.stringify(t)),c.push("/")}})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"LoginPage",children:[Object(l.jsx)("h2",{className:"LoginPage-header",id:"LoginPage-header",children:Object(l.jsx)("img",{src:xe,alt:"Log In"})}),Object(l.jsxs)("form",{className:"LoginPage-form",onChange:function(e){e.preventDefault(),r(Object(J.a)(Object(J.a)({},n),{},Object(U.a)({},e.target.name,e.target.value)))},children:[Object(l.jsxs)("label",{className:"LoginPage-form-field",htmlFor:"username",children:[Object(l.jsx)("p",{children:"username:"}),Object(l.jsx)("input",{type:"text",name:"username"})]}),Object(l.jsxs)("label",{className:"LoginPage-form-field",htmlFor:"password",children:[Object(l.jsx)("p",{children:"password:"}),Object(l.jsx)("input",{type:"password",name:"password"})]}),Object(l.jsx)("button",{className:"LoginPage-login-button",type:"submit",onClick:u,children:"login"})]}),Object(l.jsx)(s.b,{className:"LoginPage-signup-button",to:"/signup",children:"Not a member? Sign up!"})]})},we=n.p+"static/media/signup-image-1.a01a6aa7.png";n(108);var ye=function(){var e=Object(a.useState)({username:"",password:""}),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useContext)(j).setUser,i=Object(o.e)(),c=function(){var e=Object(G.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Oe(n).then((function(){console.log("successfully signed up!")})).catch((function(e){return console.log(e)}));case 3:return e.next=5,ge(n).then((function(e){if(e.data.accessToken){var t={username:e.data.username,accessToken:e.data.accessToken,id:e.data.id};s(t),localStorage.setItem("loggedInUser",JSON.stringify(t)),i.push("/")}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"SignupPage",children:[Object(l.jsx)("h2",{className:"SignupPage-header",id:"SignupPage-header",children:Object(l.jsx)("img",{src:we,alt:"Sign Up"})}),Object(l.jsxs)("form",{className:"SignupPage-form",onChange:function(e){e.preventDefault(),r(Object(J.a)(Object(J.a)({},n),{},Object(U.a)({},e.target.name,e.target.value)))},children:[Object(l.jsxs)("label",{className:"SignupPage-form-field",htmlFor:"username",children:[Object(l.jsx)("p",{children:"username:"}),Object(l.jsx)("input",{type:"text",name:"username"})]}),Object(l.jsxs)("label",{className:"SignupPage-form-field",htmlFor:"email",children:[Object(l.jsx)("p",{children:"email:"}),Object(l.jsx)("input",{type:"text",name:"email"})]}),Object(l.jsxs)("label",{className:"SignupPage-form-field",htmlFor:"password",children:[Object(l.jsx)("p",{children:"password:"}),Object(l.jsx)("input",{type:"password",name:"password"})]}),Object(l.jsx)("button",{className:"SignupPage-signup-button",type:"submit",onClick:c,children:"Create Account"})]})]})},Ne=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(b,{children:[Object(l.jsx)(A,{}),Object(l.jsxs)(s.a,{children:[Object(l.jsx)(o.a,{exact:!0,path:"/",component:function(){return Object(l.jsx)(E,{})}}),Object(l.jsx)(o.a,{exact:!0,path:"/review",component:function(){return Object(l.jsx)(oe,{})}}),Object(l.jsx)(o.a,{exact:!0,path:"/find",component:function(){return Object(l.jsx)(pe,{})}}),Object(l.jsx)(o.a,{exact:!0,path:"/signin",component:function(){return Object(l.jsx)(ve,{})}}),Object(l.jsx)(o.a,{exact:!0,path:"/Signup",component:function(){return Object(l.jsx)(ye,{})}})]})]})})};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(Ne,{})})}),document.getElementById("root"))},33:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.6cfdd8be.chunk.js.map